
<h2>Login Page</h2>


<script type="text/javascript">
    initApp = function() {
      firebase.auth().onAuthStateChanged(function(user) {
        if (user) {
          // User is signed in.
          var displayName = user.displayName;
          var email = user.email;
          var emailVerified = user.emailVerified;
          var photoURL = user.photoURL;
          var uid = user.uid;
          var providerData = user.providerData;

          user.getToken().then(function(accessToken) {
            //document.getElementById('sign-in-status').textContent = 'Signed in';
            //document.getElementById('uid').textContent = uid;
            //document.getElementById('account-details').textContent = JSON.stringify({
            //  displayName: displayName,
            //  email: email,
            //  emailVerified: emailVerified,
            //  photoURL: photoURL,
            //  uid: uid,
            //  accessToken: accessToken,
            //  providerData: providerData
            //}, null, '  ');
          });
          //console.log(uid);
          document.getElementById('form').style.visibility = 'hidden';
          document.getElementById('signout').style.visibility = 'visible';
        } else {
          // User is signed out.
          document.getElementById('form').style.visibility = 'visible';
          document.getElementById('signout').style.visibility = 'hidden';
          //document.getElementById('account-details').textContent = 'null';
        }
      }, function(error) {
        console.log(error);
      });
    };

    window.addEventListener('load', function() {
      initApp()
    });
</script>


<fieldset>
  <legend>Oauth</legend>
  <p>
    <!--<button  class="btn btn-primary" ng-click="anonymousLogin()">Anonymous</button>
    <button  class="btn btn-primary" ng-click="oauthLogin('facebook')">Facebook</button>
    <button  class="btn btn-primary" ng-click="oauthLogin('google')">Google</button>
    <button  class="btn btn-primary" ng-click="oauthLogin('twitter')">Twitter</button>
    <button  class="btn btn-primary" ng-click="oauthLogin('github')">GitHub</button>-->
  </p>
</fieldset>

<form role="form" id="form" novalidate>
  <p class="form-group">
    <label for="loginEmail">email</label>
    <input id="loginEmail" required name="email" type="email" ng-model="email" class="form-control" />
  </p>
  <p class="form-group" ng-cloak ng-show="createMode">
    <label for="loginusername">username</label>
    <input id="loginusername" required name="username" type="username" ng-model="username" class="form-control" />
  </p>  
  <p class="form-group">
    <label for="loginPass">password</label>
    <input id="loginPass" required name="pass" type="password" ng-model="pass" class="form-control" />
  </p>
  <p class="form-group" ng-cloak ng-show="createMode">
    <label for="loginConfirm">confirm pass</label>
    <input id="loginConfirm" required name="confirm" type="password" ng-model="confirm" class="form-control" />
  </p>

  <p>
    <button  class="btn btn-primary" ng-click="passwordLogin(email, pass)" ng-hide="createMode">Log In</button>
    <button  class="btn btn-default" ng-click="createMode = true" ng-hide="createMode">Register</button>
    <button  class="btn btn-primary" ng-cloak ng-show="createMode"
            ng-click="createAccount(email, username, pass, confirm)">Create Account</button>
    <button  class="btn btn-default" ng-cloak ng-show="createMode" ng-click="createMode = false">Cancel</button>
  </p>
</form>
<p ng-show="err" class="bg-danger">{{err}}</p>

<button id="signout" class="btn btn-primary" onclick="firebase.auth().signOut();initApp();">Log Out</button>

